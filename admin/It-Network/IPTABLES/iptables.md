## IPTABLES

### Netfilter

- iptables 사용자들이 간과하는 것이 있는데 iptables가 패킷을 필터이 하는것이 아니라 패킷필터링은 커널에 탑재된 Netfilter 기능으로 하며 iptalbes는 룰셋 구축 툴이라 볼 수 있다

### Chain

- iptables는 3가지의 체인을 가지고있다
    - INPUT 체인 : 시스템으로 들어오는 패킷을 처리
    - OUTPUT 체인 : 시스템이서 나가는 패킷을 처리
    - FORWARD 체인 : 시스템을 통과해 다른 네트워크로 전달되는 패킷을 처리

### Rule 우선순위

- 체인에 등록된 규칙은 등록된 순서대로 작동
    - 따라서 등록순서가 매우 중요
    - 특정 패킷을 허용하는 규칙이 먼저 등록되어야 해당 패킷을 차단하는 규칙보다 먼저 작동

### Rule의 관리

- **`A`** 옵션을 사용하여 규칙을 체인의 끝에 추가
- **`I`** 옵션을 사용하여 원하는 위치에 규칙을 삽입
- **`R`** 옵션을 사용하여 기존 규칙을 대체
- **`D`** 옵션을 사용하여 규칙을 삭제합니다.
- **`L`** 옵션은 작성된 모든 규칙의 목록을 표시
- **`F`** 옵션은 해당 체인의 모든 규칙을 삭제
- 모든 체인의 규칙을 삭제하려면 체인을 지정하지 않고 **`F`**를 사용

### Rule의 특징

- iptables의 명령은 즉시 시스템이 적용됨
    - 시스템을 재부팅하지 않아도 변경사항이 즉시 반영됨

### 기본 체인

- iptables에는 `INPUT, FORWARD, OUTPUT`와 같은 기본 체인이 존재함
    - 위에서 보았듯 시스템에 들어오는, 통과하는, 시스템이서 나가는 패킷을 처리하는데 사용