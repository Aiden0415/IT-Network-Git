# VLAN

## VLAN

- 물리적인 배치와는 상관없이 논리적으로 LAN을 구성할 수 있는 기술
- 네트워크 자원가 사용자들을 위치에 관계없이 논리적으로 그룹화시킴
- 동일한 스위치에 연결되어 있어도 VLAN 소속이 다르면 통신을 할 수 없도록 하여 네트워크 보안 강화
- 브로드캐스트 데이터의 전송을 제한하며, 하나의 VLAN은 하나의 브로드캐스트 영역을 형성함

## VLAN Switch port

- 액세스 포트 (Access port) - 하나의 VLAN에만 소속, 주로 PC, Server 등이 연결됨
- 트렁크 포트 (Trunk port) - 모든 VLAN 트래픽 전달 가능, 주로 스위치와 스위치를 연결하는데 사용
- 유형
    - 정적 (Static) VLAN - 액세스 포트를 기준으로 VLAN 지정
    - 동적 (Dynamic) VLAN - MAC 주소를 기준으로 VLAN 지정

## VLAN 식별방식

- 트렁크 링크(Trunk Link)를 지나가는 데이터에 Vlan을 식별하는 정보를 추가하는 방식으로 시스코사의 ISL(Inter-Switch link) 과 IEEE 802.1q가 있음
- ISL은 26바이트 헤더와 4바이트의 CRC를 사용하며, 기존 LAN 프레임은 데이터로 간주함
- 802.1q는 4바이트 태깅 정보와 재계산되는 CRC를 사용하며, 2바이트의 TPID(Tag Protocol Identifier)는 0x8100으로 고정된 값을 사용하며, 이 프레임이 VLAN 식별자를 전달하고 있다는 것을 알려줌

---

## VTP

- 여러 대의 스위치로 구성된 스위치가 네트워크에서VLAN 정보를 각 스위치에서 효율적으로 관리하기 위해 개발함
- 서버 모드로 동작하는 스위치는 VTP영역의 모든 VLAN 관련 정보를 생성할 수 있음
- 클라이언트 모드로 동작하는 스위치는 VLAN의 생성,변경,삭제 불가능
- 트랜스페어런트 모드에서는 서버모드와 같이 VLAN의 정보를 다른 스위치에게 전달할 수 없음

---

## VLAN 설정시 고려사항

- 스위치가 최대 몇 개의 VLAN을 지원하는지 확인
- VLAN1은 공장 초기화 값이므로 기본 관리용으로 사용
- CDP와 VTP는 VLAN1을 이용하여 전파되어야 함
- 스위치의 대표주소는 VLAN1 가상인터페이스에 지정
- VLAN은 VTP 서버 또는 트랜스페어런트 모드에서 생성-삭제
- VLAN 당 하나의 서브넷 할당

---

> VLAN 설정 절차
> 
- VTP 설정 → 트렁크 포트 설정 → VLAN 생성 → VLAN 할당