# Inver-VLAN(MLS)

## Router-on-a-stick 문제점

- 다른 VLAN(서브넷)으로 데이터를 보내기 위해서는 무조건 라우터를 거쳐야하므로, 라우터와 스위치 간의 통신 링크에 부하가 가중됨
- 외부망으로 나가는 트래픽과 내부에 있는 서브넷 간의 통신 데이터가 라우터로 집중되어 소규모 망이 아니라면 심한 과부하가 걸릴 수 있음
- 망이 커질수록 라우터-스위치 구간은 대역폭이 넓은 고속 링크를 사용해야 함

## MLS

- 라우터를 거치지 않고 내부에 있는 서브넷 간에 통신이 되기 위해서는 라우터 대신에 스위치가 라우터 역할과 기능을 수행할 수 있도록 기능이 확장되어야 함 (L3)
- L3 스위치는 기존 2계층 기능 뿐만 아니라 라우터에서 수행되는 3계층 기능을 지원하며, 2개 이상 계층의 기능을 수행한다고 해서 멀티레이어 스위치 (MLS)라고 함
- L3 이용하여 Inter-VLAN 라우팅을 수행하는 방식을 MLS라고 함
- MLS는 스위치 네트워크에서 라우터가 없어도 자체적으로 라우팅 기능을 사용하여 서브넷 간의 통신을 지원할 수 있음
- 라우터는 외부망과의 통신만을 담당하고 내부 서브넷 간의 통신은 MLS가 처리하도록 스위치 네트워크를 구성함
- MLS 라우터의 LAN서브 인터페이스 대신에 가상 LAN 인터페이스(SVI)를 사용하여 여러 VLAN/서브넷 트래픽을 처리 할 수 있음

## MLS 설정 절차

- 스위치에서 라우터 역할을 수행할 수 있도록 라우팅 기능을 활성화 시킴
- 스위치 네트워크에 등록된 VLAN(서브넷)의 디폴트 게이트웨이 역할을 수행할 수 있도록 가상 LAN 인터페이스 생성
- 가상 LAN 인터페이스 모드로 들어가서 해당 서브넷의 디폴트 게이트웨이 주소 할당
- 라우터를 외부로 데이터를 전달하기 위해 라우팅 프로토콜 실행
- command
    - ip routing 명령어
    - SVI 설정 명령어