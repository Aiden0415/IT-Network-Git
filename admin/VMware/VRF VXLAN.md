# VRF | VXLAN

## VRF(Virtual Routing Forwarding)

테넌트(고객) = VRF

(bgp)(egp)(mpls)(vxlan)

- L2 VLAN과 같은 L3 가상화 장비 기술
- 한 라우터에 여러 라우팅 테이블을 생성하여 마치 라우터가 여러 개인 것처럼 구성가능
- 각각의 VRF에 동일한 IP가 있더라도 서로 다른 VRF이므로 다르게 작동
- 라우팅 테이블이 여러개라 FIB가 여러개처럼 보일 수 있으나 실제 하드에어에서는 하나의  FIB를 사용하고 FIB ID로 구분해 라우팅 테이블을 구분
- 리눅스 커널은 namespace라는 기능을 제공하는데, NET namespace를 통해 인터페이스를 구분해 원하는 네트워크로 통신할 수 있게 된다

---

## VXLAN(Virtual eXtensible Local Area Network)

- VXLAN(가상 확장형 LAN)이란 IETF(Internet Engineering Task Force) 네트워크 가상화 기술 표준
- VXLAN은 여러 다른 조직, 즉 "테넌트"가 다른 테넌트의 네트워크 트래픽을 전혀 볼 수 없는 상태로 하나의 물리적 네트워크를 공유할 수 있게 해줌
## 장점
    
    1. 확장성: VXLAN은 24-bit의 식별자를 사용하여 대규모 네트워크를 지원할 수 있음
        1. 이는 수백, 수천 개의 가상 네트워크를 구축하는 데 용이하며, 대규모 데이터 센터에서의 가상 머신 간 효율적인 통신을 지원
    2. 유연성: VXLAN은 어떠한 기존 하드웨어나 네트워크 토폴로지에도 독립적으로 사용할 수 있음
        1. 따라서 기존 인프라를 변경하지 않고도 가상화된 네트워크를 쉽게 도입할 수 있음
    3. 가상화 환경 지원: VXLAN은 가상 머신 및 컨테이너와 같은 가상화 기술과 쉽게 통합될 수 있음
        1. 가상 머신 간의 이동이나 복제와 같은 작업에서 유연성을 제공하여 가상화된 환경에서의 효과적인 네트워크 관리를 지원
    4. Overlay 네트워킹: VXLAN은 Overlay 네트워킹 기술 중 하나로, 기존의 어떤 하드웨어나 네트워크 토폴로지에 종속되지 않고 가상화된 네트워크를 생성할 수 있음
## 단점
    1. 오버헤드: VXLAN은 추가적인 헤더를 사용하므로 오버헤드가 발생할 수 있음
        1. 특히, 작은 패킷의 경우에는 더 큰 오버헤드가 발생할 수 있음
    2. 복잡성: VXLAN은 구성 및 관리가 상대적으로 복잡할 수 있음
        1. 특히, 대규모 환경에서는 구성 및 관리가 더욱 복잡해질 수 있음
    3. 네트워크 가시성 부족: VXLAN을 사용하면 가상 네트워크의 트래픽이 기존 네트워크에서는 내부적으로 처리되기 때문에 가상 네트워크의 트래픽에 대한 가시성이 떨어질 수 있음
    4. 네트워크 장비 호환성: VXLAN을 완전히 지원하는 모든 네트워크 장비가 아직 존재하지 않을 수 있음
        1. 특히, 기존의 하드웨어 장비를 업그레이드하지 않고 VXLAN을 지원하도록 하려면 호환성 문제가 발생할 수도 있음
    
## VXLAN이 사용되는 경우
    
    1. 가상 머신 이동 및 복제:
        - VXLAN은 가상 머신의 이동이나 복제 시에 가상 머신이 속한 가상 네트워크를 유지하면서 효과적으로 트래픽을 라우팅할 수 있음
        - 이는 가상화 환경에서 유연성과 이동성을 제공합니다.
    2. 멀티 테넌시:
        - VXLAN은 멀티 테넌시 환경에서 가상 네트워크의 격리를 제공
        - 서로 다른 테넌트나 고객이 동일한 인프라에서 가상 네트워크를 구성하고 서비스하는 데 사용
    3. 클라우드 환경:
        - 클라우드 서비스 제공자는 대규모 데이터 센터에서 VXLAN을 사용하여 가상화된 리소스 간의 효과적인 통신을 가능하게 함
        - 이는 클라우드 환경에서 확장 가능하고 유연한 네트워크 아키텍처를 지원
    4. 오버레이 네트워킹:
        - VXLAN은 오버레이 네트워킹 기술 중 하나로 사용
        - 기존 네트워크 인프라를 변경하지 않고 가상화된 네트워크를 생성하고 관리할 수 있음
    5. 네트워크 가상화 및 SDN:
        - 소프트웨어 정의 네트워킹(SDN) 및 네트워크 가상화 환경에서 VXLAN은 네트워크를 가상적으로 확장하고 관리하는 데 사용
        - 이는 네트워크 자원의 효율적인 사용을 가능케 합니다.
    6. 네트워크 확장성:
        - VXLAN은 확장 가능한 네트워크를 구성할 수 있는 기능을 제공하여 대규모 데이터 센터에서의 확장성 문제를 해결